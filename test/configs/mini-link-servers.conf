
!~home
!-prep>
!--dirs>       
!---deposit>    =ssh ${ssh.user}@${host.addr} "mkdir /media/richard/ELEMENTS"
!---uploaded>   =ssh ${ssh.user}@${host.addr} "mkdir /home/deposit/uploaded"
!---people>     =ssh ${ssh.user}@${host.addr} "mkdir /var/www/html/people"
=--> order(dirs) : [deposit, uploaded, people]

!--utility>
!---file-mover> 
!----npm>       =ssh ${ssh.user}@${host.addr} "pushd /home/deposit;npm install -g of-this-world; get-npm-assets human-page-queue;popd"
!----starter>   =scp $[configs]/server-scripts/runner.sh ${ssh.user}@${host.addr}:/home/deposit/
=---> order : [ npm, starter]
!---store-key>
!----cmd-key>   =ssh ${ssh.user}@${host.addr} "pushd /home/deposit;cops-subst ./page-queue.conf secret='$secret';popd"
=----> order(cmd-key): [ cmd-key ]
=--> order(utility) : [ file-mover,store-key ]
=-> order(prep) : [dirs, utility]

!-startup>   =ssh ${ssh.user}@${host.addr} "pushd /home/deposit;bash runner.sh &;disown;popd"
=> order(otw) : [prep, startup]
